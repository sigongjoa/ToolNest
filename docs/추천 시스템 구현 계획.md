# ToolNest 추천 시스템 구현 계획

## 1. 개요
이 문서는 기획서에 명시된 AI 도구 추천 시스템의 상세 구현 계획을 설명합니다. WebLLM을 활용하여 사용자 선호도에 기반한 AI 도구를 추천하는 기능을 개발하는 것이 목표입니다.

## 2. 주요 구성 요소 및 기술 스택
- **WebLLM (@mlc-ai/web-llm)**: 클라이언트 측에서 텍스트 임베딩을 생성하고, 경우에 따라 자연어 추천 생성에 활용합니다.
- **데이터 파일**: 
  - `public/data/tools.json`: 추천 대상이 되는 AI 도구들의 메타데이터(이름, 설명, 카테고리 등)를 포함합니다. (사용자가 데이터 수집 및 생성)
  - `public/data/embeddings.json`: `tools.json`에 있는 각 도구 설명에 대한 WebLLM 또는 OpenAI Embedding API를 통해 미리 계산된 임베딩 벡터들을 포함합니다. (사용자가 데이터 수집 및 생성)
- **클라이언트 측 로직**: JavaScript/TypeScript를 사용하여 WebLLM 모델 로드, 사용자 선호 텍스트 임베딩, 벡터 유사도 계산(코사인 유사도), 결과 정렬 및 표시를 처리합니다.

## 3. 구현 상세 계획

### 3.1. WebLLM 통합
1. **패키지 설치**: `my-toolnest-frontend` 프로젝트 내에 `@mlc-ai/web-llm` npm 패키지를 설치합니다.
   ```bash
   npm install @mlc-ai/web-llm
   ```
2. **WebLLM 엔진 유틸리티 모듈 생성**: `my-toolnest-frontend/src/lib/webLLMClient.ts` 파일을 생성하여 WebLLM 엔진 초기화 및 텍스트 임베딩 기능을 캡슐화합니다.
   - `CreateMLCEngine`을 사용하여 엔진을 초기화합니다. 모델 로딩 진행 상황을 추적하기 위한 콜백을 포함합니다.
   - 사용자의 선호 텍스트를 입력받아 해당 텍스트의 임베딩 벡터를 반환하는 `embed()` 함수를 제공합니다.
   - `logger.debug` 호출을 추가하여 함수 진입/종료 및 주요 변수 할당을 추적합니다.

### 3.2. 데이터 로딩
1. **JSON 데이터 로딩**: `public/data/tools.json` 및 `public/data/embeddings.json` 파일을 클라이언트 측에서 비동기적으로 로드합니다.
   - 이 파일들은 앱이 시작될 때 한 번 로드되거나, 추천 기능이 필요할 때 로드됩니다.
   - 데이터 로딩 중 발생할 수 있는 오류를 처리하고 로딩 상태를 사용자에게 표시합니다.
   - `logger.debug` 호출을 추가하여 데이터 로딩 프로세스를 추적합니다.

### 3.3. 추천 로직 구현
1. **유사도 측정 함수**: `my-toolnest-frontend/src/lib/utils.ts` (또는 유사한 유틸리티 파일)에 두 벡터 간의 코사인 유사도를 계산하는 `cosineSimilarity` 함수를 구현합니다.
2. **추천 함수**: `my-toolnest-frontend/src/lib/recommender.ts` 파일을 생성하여 핵심 추천 로직을 구현하는 `recommend` 함수를 정의합니다.
   - 입력: 사용자 선호 텍스트 (문자열).
   - 프로세스:
     a. `webLLMClient`를 사용하여 사용자 선호 텍스트의 임베딩 벡터(`pVec`)를 생성합니다.
     b. 로드된 `embeddings.json`의 각 도구 임베딩 벡터와 `pVec` 간의 코사인 유사도를 계산합니다.
     c. 각 도구에 대해 유사도 점수를 할당하여 도구 객체 배열을 생성합니다.
     d. 유사도 점수에 따라 도구를 내림차순으로 정렬합니다.
     e. 상위 N개의 도구를 반환합니다 (기본값 5개).
   - `logger.debug` 호출을 추가하여 함수 진입/종료 및 주요 변수 할당을 추적합니다.

### 3.4. UI 통합
1. **컴포넌트 개발**: `my-toolnest-frontend/src/pages/home.tsx` (또는 적절한 새 컴포넌트)에 추천 기능을 표시하기 위한 UI를 추가합니다.
   - 사용자 선호 텍스트를 입력받을 텍스트 필드 또는 텍스트 영역을 추가합니다.
   - 추천 시작 버튼을 추가합니다.
   - 추천 결과(도구 목록)를 표시할 영역을 추가합니다.
   - WebLLM 모델 로딩 및 추천 생성 중 로딩 인디케이터를 표시합니다.
   - `logger.debug` 호출을 추가하여 UI 상호작용 및 렌더링 상태를 추적합니다.

## 4. 로깅 및 디버깅
- 모든 핵심 함수 및 로직 분기점에 `console.debug` (또는 `logger.debug`)를 사용하여 디버깅 정보를 출력합니다. 이는 문제 발생 시 진단에 유용합니다.

## 5. 예상 결과
- 사용자가 자신의 선호도를 텍스트로 입력하면, WebLLM 기반 추천 시스템이 관련성 높은 AI 도구 목록을 제안합니다.
- `console` 로그를 통해 WebLLM 모델 로딩 진행 상황, 임베딩 생성, 유사도 계산 과정 등을 확인할 수 있습니다.

## 6. 후속 조치
- 사용자 선호 텍스트 외에 기존 사용 기록 등을 기반으로 한 추천 확장은 추후 고려합니다.
- `public/data/tools.json` 및 `public/data/embeddings.json` 파일의 정확성과 최신 상태 유지는 필수적입니다. 